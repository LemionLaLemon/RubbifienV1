<!DOCTYPE html>
<link rel="stylesheet" type="text/css" href="index.css" />
<link rel="icon" type="image/x-icon" href="favicon.ico">
<html>
<head>
  <title>Login Page</title>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
</head>
<body>
  <div class="center">
  <center><h1>Login</h1></center>
  <form id="loginForm">
    <label for="username">Username</label>
    <center><input type="text" id="username" name="username" required></center>
    <br>
    <label for="password">Password</label>
    <center><input type="password" id="password" name="password" required></center>
    <br>
    <input type="submit" value="Login" id="login">
  </form>
  <label id="normal">Don't have an account?</label>
  <a href="signup.html">Register</a>
</div>

  <script>
    // Initialize Firebase
    const firebaseConfig = {
    };
    firebase.initializeApp(firebaseConfig);

    const db = firebase.firestore();

    // Handle form submission
    const loginForm = document.getElementById("loginForm");
    loginForm.addEventListener("submit", (event) => {
      event.preventDefault();

      const usernameInput = document.getElementById("username");
      const passwordInput = document.getElementById("password");

      const username = usernameInput.value;
      const password = passwordInput.value;

      // Retrieve user data from Firestore
      db.collection("users").doc(username).get()
        .then((doc) => {
          if (doc.exists) {
            const userData = doc.data();
            if (userData.password === password) {
              console.log("Login successful");
              // Save username in session storage
              sessionStorage.setItem("username", username);
              // Redirect to the app page or any other desired page
              window.location.href = "app.html";
            } else {
              alert("Incorrect password");
            }
          } else {
            alert("User not found");
          }
        })
        .catch((error) => {
          console.error("Error retrieving user data: ", error);
        });
    });
  </script>
</body>
</html>



<!--to host use firebase deploy --only hosting:rubbifien-->